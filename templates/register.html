<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Registration Form</title>
		<link rel="stylesheet" href="../static/login.css"/>
		<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet"/>
		<link rel="shortcut icon" type="image/x-icon" href="../static/Icon.ico"/>
		<script src="../static/jquery-2.2.3.js"></script>
	</head>

	<body>
		<img src="../static/logo.png"></img>
		<div class="login">
			<div class="login-screen">
				<div class="app-title">
					<h1 style="margin: 20px;">Register</h1>
				</div>

				<div class="login-form">

					<form method=POST action="{{ url_for('register') }}">
					<div class="control-group">
					<input type="text" class="login-field" value="" placeholder="Enter username..." name="username" required>
					<label class="login-field-icon fui-user" for="login-name"></label>
					</div>

					<div class="control-group">
					<input type="password" class="login-field" id="firstPass" placeholder="Enter password..." name="pass" required>
					<label class="login-field-icon fui-lock" for="login-pass"></label>
					</div>

					<div class="control-group">
					<input type="password" class="login-field" id="secondPass" placeholder="Re-Enter password..." required>
					<label class="login-field-icon fui-lock" for="login-pass"></label>
					</div>

					<div class="flashes" id="flashMessage">
						{{get_flashed_messages()[0]}}
					</div>

					<button type="submit" class="btn btn-primary btn-large btn-block" id="submitButton">Register</button>
					<a class="login-link" href="{{ url_for('index') }}">Already have an accout? Return to login</a>
					</form>

				</div>

			</div>
		</div>

		<script>
			var firstPass = document.querySelector("#firstPass");
			var secondPass = document.querySelector("#secondPass");
			var message = document.querySelector("#flashMessage");
			var button = document.querySelector("#submitButton");

			$(document).ready(function(){
				button.disabled = true;
			});
			
			$('#firstPass').keyup(function(){
				if(firstPass.value === secondPass.value && firstPass.value !== "" && secondPass.value !== ""){
					message.innerHTML = "Passwords match";
					button.disabled = false;
				}
				else if(firstPass.value !== secondPass.value  && firstPass.value !== "" && secondPass.value !== ""){
					message.innerHTML = "Passwords do not match";
					button.disabled = true;
				}
			});

			$("#secondPass").keyup(function(){
				if(firstPass.value !== secondPass.value && firstPass.value !== "" && secondPass.value !== ""){
					message.innerHTML = "Passwords do not match";
					button.disabled = true;
				}
				else if(firstPass.value === secondPass.value  && firstPass.value !== "" && secondPass.value !== ""){
					message.innerHTML = "Passwords match";
					button.disabled = false;
				}
			});
		</script>

	</body>
</html>
